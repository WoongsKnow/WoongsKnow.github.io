<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
  <div>Test</div>
<body>
  <script>
    // let db;
    // let room = window.indexedDB.open('room');
    // console.log(room);
    // room.onupgradeneeded = (event) => {

    // };
    // room.onerror = (event) => {
    //   console.log('onerror');
    //   // request.errorCode 에 대해 무언가를 한다!
    // };
    // room.onsuccess = (event) => {
    //   // request.result 에 대해 무언가를 한다!
    //   console.log(event);
    //   db = event.target.result;
    //   console.log('onsuccess');
    //   console.log(db);
    //   let store = db.createdObjectStore('test', {keyPath: 'id'});
    // };

    var db = indexedDB.open('books');
    if (db.version !== '1.0') {
      var olddb = indexedDB.open('books', 'Book store');
      olddb.createObjectStore('books', 'isbn');
      olddb.createIndex('BookAuthor', 'books', 'author', false);
      olddb.setVersion("1.0");  
    }
    // db.version === "1.0";  
    var index = db.openIndex('BookAuthor');
    var matching = index.get('fred');
    if (matching)
      report(matching.isbn, matching.name, matching.author);
    else
      report(null);
  </script>
</body>
</html>